<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Hello World</title>
    <link th:href="@{/webjars/bootstrap/5.1.0/css/bootstrap.min.css}"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
          rel="stylesheet"
          crossorigin="anonymous">
</head>
<body th:style="'background-color: ' + ${backgroundColor} + '; font-family: ' + ${fontStyle}">
    <div class="px-4 py-5 my-5 text-center">
        <img class="d-block mx-auto mb-4" src="/assets/logo.svg" alt="">
        <h1 class="display-5 fw-bold">My First Web App</h1>
        <div class="col-lg-6 mx-auto">
            <p class="lead mb-4" th:text="${message}">Hello student.</p>
            <p th:text="#{greeting}">Prueba</p>
            <form th:action="@{/setTheme}" method="post">
                <label for="backgroundColor">Background Color:</label>
                <input type="color" id="backgroundColor" name="backgroundColor" th:value="${backgroundColor}"/>
                
                <label for="fontStyle">Font Style:</label>
                <select id="fontStyle" name="fontStyle" th:value="${fontStyle}">
                    <option value="Arial">Arial</option>
                    <option value="Verdana">Verdana</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Palatino">Palatino</option>
                    <option value="Garamond">Garamond</option>
                    <option value="Impact">Impact</option>
                </select>
                
                <button type="submit" class="btn btn-primary">Save Preferences</button>
            </form>
        </div>

        
        <!-- Auth section -->
        <div class="col-lg-6 mx-auto mt-4">

            <div th:if="${#authentication}">
                <p>Logged in as: <span th:text="${#authentication.name}">User</span></p>
                <form action="/logout" method="post">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <input type="submit" value="Logout">
                </form>
                <a href="/api/greeting">
                    <button type="button" class="btn btn-primary">Go to Greeting</button>
                </a>
            </div>

            <!-- When user is not authenticated -->
            <div th:unless="${#authentication}">
                <a href="/login" class="btn btn-primary">Login</a>
            </div>

            <div sec:authorize="hasRole('ROLE_ADMIN')">
                <a href="/api/greeting/history">
                    <button type="button">Greeting history</button>
                </a>
            </div>
        </div>
    </div>
    
    <script th:src="@{/webjars/bootstrap/popper/2.9.3/umd/popper.min.js}"
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
            crossorigin="anonymous"></script>
    <script th:src="@{/webjars/bootstrap/5.1.0/js/bootstrap.min.js}"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"
            crossorigin="anonymous"></script>
</body>
</html>
